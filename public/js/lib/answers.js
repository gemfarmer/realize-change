// Generated by CoffeeScript 1.6.3
(function() {
  $(function() {
    var $answerFuture, $answerGoals, $seeAnswers;
    $seeAnswers = $('#seeAnswers');
    $seeAnswers.css({
      opacity: "0"
    });
    $('#answerPrompt').validate({
      rules: {
        answerFuture: {
          required: true,
          text: true,
          minlength: 1
        },
        answerGoals: {
          required: true,
          minlength: 1
        }
      }
    });
    $(document).on('click', '#addAnswer', function(e) {
      var countryOfOrigin, val;
      e.preventDefault();
      countryOfOrigin = geoplugin_countryName();
      console.log(countryOfOrigin);
      val = $('#answerPrompt').serialize();
      $('#answerFuture').val('');
      $('#answerGoals').val('');
      return $.get('/sendanswer', val, function(data) {
        $seeAnswers.css({
          opacity: "1"
        });
        $('#success').addClass("show");
        return setTimeout(function() { $("#success").removeClass("show"); }, 3000 );;
      });
    });
    $answerFuture = $('#answerFuture');
    $answerGoals = $('#answerGoals');
    $answerFuture.on('keyup', function(e) {
      var $countdownFuture, val;
      e.preventDefault();
      val = $answerFuture.val();
      console.log(val.length);
      $countdownFuture = $('#countdownFuture');
      return $countdownFuture.val(300 - val.length);
    });
    return $answerGoals.on('keyup', function(e) {
      var $countdownGoals, val;
      e.preventDefault();
      val = $answerGoals.val();
      console.log(val.length);
      $countdownGoals = $('#countdownGoals');
      return $countdownGoals.val(150 - val.length);
    });
  });

}).call(this);
